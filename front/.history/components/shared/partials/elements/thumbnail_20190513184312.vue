<template>
  <nuxt-link :to="to" class="article-image" v-lazy-container="{ selector: 'img' }">
    <img v-if="src" :data-src="src" :alt="alt">
    <span class="post-loader">
      <svg height="100" width="198" xmlns="http://www.w3.org/2000/svg">
        <g class="lv-group">
          <path
            class="lv-path"
            d="M118.1 11.52l31.925 82.343c2.4 6.183 11.016 6.183 13.412 0l31.93-82.343a7.421 7.421 0 0 0-.756-6.815 7.176 7.176 0 0 0-5.952-3.19h-63.855a7.176 7.176 0 0 0-5.949 3.192 7.421 7.421 0 0 0-.755 6.813zm0 0zm59.971 4.64l-21.337 55.041-21.343-55.04zM1.5 8.838v70.578C1.502 89.96 9.929 98.496 20.314 98.5h34.83c5.532 0 9.013-6.075 6.256-10.961L14.959 5.194C11.292-1.308 1.5 1.327 1.5 8.838zm15.923 33.216h1.492v.004h-1.5zm0 0l1.298-.733L42.71 83.854H20.314c-2.435 0-4.4-1.99-4.4-4.438V42.054zm84.162 56.445c13.594 0 24.622-11.174 24.622-24.967s-11.028-24.967-24.622-24.967-24.622 11.174-24.622 24.967 11.028 24.967 24.622 24.967zm0-14.645c-5.642 0-10.207-4.626-10.207-10.322s4.565-10.322 10.207-10.322 10.208 4.625 10.208 10.322-4.566 10.322-10.208 10.322zM76.316 51.132c13.705 0 24.816-11.11 24.816-24.816S90.022 1.5 76.316 1.5a24.816 24.816 0 1 0 0 49.632zm0-14.544c-5.673 0-10.272-4.6-10.272-10.272s4.599-10.272 10.272-10.272 10.272 4.599 10.272 10.272-4.6 10.272-10.272 10.272z"
          ></path>
        </g>
      </svg>
    </span>
    <span class="post-error"></span>
  </nuxt-link>
</template>

<script>
  export default {
    name: "Thumbnail",
    props: {
      to: [String, Object],
      paramValue: {
        type: String,
        default: null
      },
      src: {
        type: String,
        default: null
      },
      alt: {
        type: String,
        default: null
      }
    }
  };
</script>

<style lang="stylus" scoped>
  .post-loader
    position absolute
    width 30px
    height 30px
    transition opacity .25s ease-in-out

  .post-error
    position absolute
    color #FFF
    font-size 14px
    opacity 0
    transition opacity .25s ease-in-out

    &:before
      display block
      margin auto
      width 40px
      height 40px
      background-image url('../../../../assets/images/broken-pic.png')
      background-size contain
      content ''

  .article-image
    position relative
    display flex
    justify-content center
    align-items center
    overflow hidden
    padding 0
    width 100%
    height 136px
    background-color rgba($tertiary, .05)
    background-size 50%

    img
      position absolute
      top 0
      bottom 0
      left 0
      width 100%
      height 100%
      opacity 0
      transition opacity .25s ease-in-out, transform .5s ease-in-out
      object-fit cover

      &[lazy=error]
        opacity 0

        ~.post-loader
          opacity 0

        ~.post-error
          opacity 1

      &[lazy=loading]
        opacity 0

        ~.post-loader
          opacity 1

      &[lazy=loaded]
        opacity 1

        ~.post-loader
          opacity 0

    &.small
      img
        &[lazy=error]
          ~.post-error
            font-size 10px

            &:before
              width 25px
              height 25px
</style>
